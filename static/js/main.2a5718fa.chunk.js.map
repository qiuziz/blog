{"version":3,"sources":["../webpack/universalModuleDefinition","utils/helper.ts","utils/global-data.ts","service/fetchapi.tsx","service/resource.tsx","hooks/use-viewport.tsx","components/post/index.tsx","router/index.tsx","pages/home/index.tsx","pages/article/index.tsx","reportWebVitals.ts","index.tsx"],"names":["root","factory","exports","module","define","amd","this","dateFormat","date","format","args","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","i","test","replace","RegExp","$1","getFullYear","substr","length","n","globalData","join","setGlobalData","key","val","getGlobalData","fetchMethod","_url","_config","a","fetch","response","ok","Error","statusText","result","json","matchUrlSearchParams","url","urlSearchParams","u","URLSearchParams","Object","keys","reduce","pre","next","includes","constructor","Array","forEach","value","append","toString","FetchApi","headers","get","config","post","bodyParams","method","body","JSON","stringify","upload","delete","put","patch","fetchResource","Resource","issues","dailyWallpaper","randomWallpaper","viewportContext","React","createContext","ViewportProvider","children","useState","window","innerWidth","width","setWidth","innerHeight","height","setHeight","handleWindowResize","useEffect","addEventListener","removeEventListener","Provider","useViewport","useContext","Post","props","data","onClick","prefix","onPostClick","className","map","id","href","number","title","Date","updated_at","slice","routes","path","Component","postList","setPostList","hasMore","setHasMore","maxWidth600","margin","style","pageStart","loadMore","page","per_page","then","res","loader","exact","noNav","search","location","split","queryString","parse","getUrlParams","setData","getArticle","useCallback","document","source","App","index","render","History","to","RouteConfig","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","container","ReactDOM","querySelector","bootstrap","mount","unmount","unmountComponentAtNode","__POWERED_BY_QIANKUN__","__webpack_public_path__","__INJECTED_PUBLIC_PATH_BY_QIANKUN__","setTimeout","bg","top"],"mappings":"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","file":"static/js/main.2a5718fa.chunk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"blog-main\"] = factory();\n\telse\n\t\troot[\"blog-main\"] = factory();\n})(this, function() {\nreturn ","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-01-29 10:46:45\n * @Last Modified by: qiuz\n */\n\nimport queryString from 'qs';\n\n/**\n * @description 时间对象格式化\n * @param date\n * @param format\n */\nexport const dateFormat = (date: Date, format: string = 'yyyy-MM-dd hh:mm:ss'): string => {\n\tif (!date) return '';\n\tlet args = {\n\t\t'M+': date.getMonth() + 1,\n\t\t'd+': date.getDate(),\n\t\t'h+': date.getHours(),\n\t\t'm+': date.getMinutes(),\n\t\t's+': date.getSeconds(),\n\t\t'q+': Math.floor((date.getMonth() + 3) / 3), // quarter\n\t\t'S': date.getMilliseconds()\n\t};\n\tif (/(y+)/.test(format)) { format = format.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length)); }\n\tfor (let i in args) {\n\t\t// @ts-ignore\n\t\tlet n = args[i];\n\t\tif (new RegExp('(' + i + ')').test(format)) { format = format.replace(RegExp.$1, RegExp.$1.length === 1 ? n : ('00' + n).substr(('' + n).length)); }\n\t}\n\treturn format;\n}\n\n\n\n/**\n * @description 获取当前url参数\n * @returns object\n */\nexport const getUrlParams = (): any => {\n\tconst search = window.location.href.split('?')[1];\n\treturn queryString.parse(search);\n}\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2020-06-01 19:13:52\n * @Last Modified by: qiuz\n * @Last Modified time: 2020-08-11 12:21:44\n */\n\nconst globalData: any = {};\n\nconst TK = [\"4\", \"3\", \"0\", \"7\", \"e\", \"6\", \"d\", \"4\", \"b\", \"b\", \"b\", \"8\", \"6\", \"5\", \"e\", \"6\", \"e\", \"1\", \"f\", \"4\", \"5\", \"b\", \"d\", \"b\", \"3\", \"4\", \"1\", \"6\", \"3\", \"8\", \"6\", \"d\", \"3\", \"e\", \"c\", \"0\", \"c\", \"1\", \"3\", \"b\"];\n\nglobalData['TK'] = TK.join('');\n\nconst setGlobalData = (key: string, val: any) => {\n  globalData[key] = val;\n};\n\nconst getGlobalData = (key: string) => {\n  return globalData[key];\n};\n\nexport { setGlobalData, getGlobalData };\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2018-11-02 14:38:52\n * @Last Modified by: qiuz\n * @Last Modified time: 2019-12-31 11:34:28\n */\n\nimport { getGlobalData } from 'utils';\nimport 'whatwg-fetch';\n\ninterface ConfigType {\n  loadingDelay?: number;\n  des?: boolean;\n  [propName: string]: any;\n}\n\nconst fetchMethod = async (_url: string, _config: any) => {\n  try {\n    const response = await fetch(_url, _config);\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    let result: any = {};\n    try {\n      result = await response.json();\n    } catch (error) {\n      result = {};\n    }\n    return result;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst matchUrlSearchParams = (url: string, urlSearchParams: any) => {\n  if (!urlSearchParams) {\n    return url.replace(/\\/:[^?]+/g, '');\n  }\n  const u = new URLSearchParams();\n  // tslint:disable-next-line:variable-name\n  let _url = Object.keys(urlSearchParams).reduce((pre, next) => {\n    if (pre.includes(':' + next)) {\n      return pre.replace(':' + next, urlSearchParams[next]);\n    } else {\n      if (urlSearchParams[next] && urlSearchParams[next].constructor === Array) {\n        urlSearchParams[next].forEach((value: any) => {\n          u.append(next, value);\n        });\n      } else {\n        u.append(next, urlSearchParams[next]);\n      }\n      return pre;\n    }\n  }, url);\n  _url = _url.replace(/\\/:[^?]+/g, '');\n  return _url + (u.toString() === '' ? '' : '?' + u);\n};\n\nclass FetchApi {\n  headers: any = {};\n  url = '';\n  constructor(_url: string) {\n    this.url = _url;\n    this.headers['Content-Type'] = 'application/json;charset=UTF-8';\n    this.headers['Authorization'] = `token ${getGlobalData('TK')}`;\n  }\n\n  get = (urlSearchParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      headers: this.headers,\n      ...config\n    });\n  };\n\n  post = (urlSearchParams?: object, bodyParams?: any, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      headers: this.headers,\n      ...config,\n      method: 'POST',\n      body: JSON.stringify(bodyParams)\n    });\n  };\n\n  upload = (urlSearchParams: object, bodyParams: FormData, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      headers: this.headers,\n      ...config,\n      method: 'POST',\n      body: bodyParams\n    });\n  };\n\n  delete = (urlSearchParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      headers: this.headers,\n      ...config,\n      method: 'DELETE'\n    });\n  };\n\n  put = (urlSearchParams: object, bodyParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      headers: this.headers,\n      ...config,\n      method: 'PUT',\n      body: JSON.stringify(bodyParams)\n    });\n  };\n\n  patch = (urlSearchParams: object, bodyParams: object, config?: ConfigType) => {\n    return fetchMethod(matchUrlSearchParams(this.url, urlSearchParams), {\n      headers: this.headers,\n      ...config,\n      method: 'PATCH',\n      body: JSON.stringify(bodyParams)\n    });\n  };\n}\n\nconst fetchResource = (url: string) => {\n  return new FetchApi(url);\n};\n\nexport { fetchResource };\n","/*\n * @Author: qiuz\n * @Date: 2018-05-24 19:24:46\n * */\n\nimport { fetchResource } from './fetchapi';\nconst API_HOST = 'https://api.github.com';\nconst SERVICE_NAME = '/repos/qiuziz/blog';\n\nexport const Resource = {\n\t/**\n\t * 获取token\n\t */\n\tissues: fetchResource(`${API_HOST}${SERVICE_NAME}/issues/:number`),\n\t// dailyWallpaper: fetchResource(`https://www.bing.com/HPImageArchive.aspx`),\n\tdailyWallpaper: fetchResource(`https://jsonp.afeld.me/?url=http%3A%2F%2Fcn.bing.com%2FHPImageArchive.aspx%3Fformat%3Djs%26idx%3D0%26n%3D1`),\n\trandomWallpaper: fetchResource(`https://jsonp.afeld.me/?url=http://pic.tsmp4.net/api/yingshi/img.php`),\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date:  2021-01-30 12:07:49\n * @Last Modified by: qiuz\n */\n\nimport React from 'react';\n\nexport const viewportContext = React.createContext({} as { width: number; height: number });\nexport const ViewportProvider = ({ children }: any) => {\n  // 顺带监听下高度，备用\n  const [width, setWidth] = React.useState(window.innerWidth);\n  const [height, setHeight] = React.useState(window.innerHeight);\n  const handleWindowResize = () => {\n    setWidth(window.innerWidth);\n    setHeight(window.innerHeight);\n  };\n  React.useEffect(() => {\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, []);\n  return <viewportContext.Provider value={{ width, height }}>{children}</viewportContext.Provider>;\n};\n\nexport const useViewport = () => {\n  const { width, height } = React.useContext(viewportContext);\n  return { width, height };\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2019-10-31 20:39:25\n * @Last Modified by: qiuz\n * @Last Modified time: 2021-01-29 12:08:30\n */\n\nimport React from 'react';\nimport './index.less';\nimport { dateFormat, getGlobalData } from 'utils';\nimport { useViewport } from 'hooks';\n\ninterface PropsType {\n  data: any[];\n  onClick?: (...args: any) => void;\n}\n\nexport const Post = (props: PropsType) => {\n  const { data, onClick = () => {} } = props;\n\n  const prefix = getGlobalData('PREFIX');\n\n  const onPostClick = (data: any) => () => {\n    onClick(data);\n  };\n\n  const { width } = useViewport();\n\n  return (\n    <div className=\"post-container\">\n      {data.map((post: any) => {\n        return (\n          <div key={post.id} className=\"post__content\" onClick={onPostClick(post)}>\n            <h2 className={`title ${width <= 600 ? 'h2-max-width-600' : ''}`}>\n              <a href={`${prefix}/blog/article?number=${post.number}`}>{post.title}</a>\n            </h2>\n            <p className=\"publish-time\">\n              {dateFormat(new Date(post.updated_at))} by{' '}\n              <a href=\"https://github.com/qiuziz\">qiuz</a>\n            </p>\n            <p className=\"intro\">\n              <a className={`${width <= 600 ? 'a-max-width-600' : ''}`} href={`${prefix}/blog/article?number=${post.number}`}>\n                {post.body.slice(0, 200)}...\n              </a>\n            </p>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2019-11-07 16:03:31\n * @Last Modified by: qiuz\n * @Last Modified time: 2021-01-29 12:02:49\n */\n\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport { Home, Article } from 'pages';\nimport { getGlobalData } from 'utils';\nimport { ViewportProvider } from 'hooks';\n\nexport const routes = [\n  {\n    path: '/blog/',\n    Component: Home,\n    exact: true,\n    title: '首页',\n    noNav: true\n  },\n  {\n    path: '/blog/article/',\n    Component: Article,\n    exact: true,\n    title: '',\n    noNav: true\n  }\n];\n\nconst App = () => {\n  const prefix = getGlobalData('PREFIX');\n  return (\n    <Switch>\n      {routes.map(({ path, Component, exact }: any, index) => {\n        return (\n          <Route\n            key={index}\n            path={`${prefix}${path}`}\n            exact={exact}\n            render={(props) => <Component {...props} History={History} />}\n          />\n        );\n      })}\n      <Redirect to={`${prefix}/blog`} />\n    </Switch>\n  );\n};\n\nexport default class RouteConfig extends React.Component<any, any> {\n  render() {\n    return (\n      <ViewportProvider>\n        <Router>\n          <App />\n        </Router>\n      </ViewportProvider>\n    );\n  }\n}\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2019-10-31 20:39:25\n * @Last Modified by: qiuz\n * @Last Modified time: 2021-01-29 12:03:28\n */\n\nimport React, { useState } from 'react';\nimport './index.less';\nimport { Resource } from 'service';\nimport { Post } from 'components';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { useViewport } from 'hooks';\n\nexport const Home = () => {\n  const [postList, setPostList] = useState<any[]>([]);\n  const [hasMore, setHasMore] = useState(true);\n  const getPosts = (page = 1) => {\n    if (!hasMore) return;\n    Resource.issues.get({ per_page: '10', page }).then((res: any) => {\n      setPostList([...postList, ...res]);\n      setHasMore(res.length >= 5);\n    });\n  };\n\n  const { width } = useViewport();\n\n  const maxWidth600 =\n    width <= 600\n      ? {\n          margin: 0,\n          width: '100%'\n        }\n      : {};\n\n  return (\n    <div className=\"home\" style={maxWidth600}>\n      <InfiniteScroll\n        pageStart={0}\n        loadMore={getPosts}\n        hasMore={hasMore}\n        loader={<div key={0}>loading...</div>}\n      >\n        <Post data={postList} />\n      </InfiniteScroll>\n    </div>\n  );\n};\n","/*\n * @Author: qiuz\n * @Github: <https://github.com/qiuziz>\n * @Date: 2019-10-31 20:39:25\n * @Last Modified by: qiuz\n * @Last Modified time: 2021-01-29 12:03:12\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport './index.less';\nimport { Resource } from 'service';\nimport { getUrlParams, dateFormat } from 'utils';\nimport Markdown from 'react-markdown';\nimport { useViewport } from 'hooks';\n\ninterface PropsType {\n  History: any;\n  location: any;\n  history: any;\n}\n\nexport const Article = (props: PropsType) => {\n  const { number } = getUrlParams();\n  const [data, setData] = useState({} as any);\n  const getArticle = useCallback(() => {\n    Resource.issues.get({ number }).then((res: any) => {\n      document.title = res.title;\n      setData(res);\n    });\n  }, [number]);\n\n  useEffect(() => {\n    getArticle();\n  }, [getArticle]);\n\n  const { width } = useViewport();\n\n\n  const maxWidth600 =\n    width <= 600\n      ? {\n          margin: 0,\n          width: '100%'\n        }\n      : {};\n\n  return (\n    <div className=\"article content\" style={maxWidth600}>\n      {data.title ? (\n        <>\n          <h2>{data.title}</h2>\n          <p className=\"publish-time\">\n            {data.updated_at && dateFormat(new Date(data.updated_at))} by{' '}\n            <a href=\"https://github.com/qiuziz\">qiuz</a>\n          </p>\n          <Markdown source={data.body} />\n          <p className=\"commit\">\n            <label>\n              <a href={`https://github.com/qiuziz/qiuziz.github.io/issues/${number}`}>去评论</a>\n            </label>\n          </p>\n        </>\n      ) : (\n        <div>loading...</div>\n      )}\n    </div>\n  );\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.less';\nimport { setGlobalData } from 'utils';\nimport Router from './router';\nimport reportWebVitals from './reportWebVitals';\n\ndeclare const window: any;\ndeclare let __webpack_public_path__: any;\n\nsetGlobalData('PREFIX', '');\n/**\n * @see https://qiankun.umijs.org/zh/faq#a-%E4%BD%BF%E7%94%A8-webpack-%E8%BF%90%E8%A1%8C%E6%97%B6-publicpath-%E9%85%8D%E7%BD%AE\n * runtime publicPath 主要解决的是微应用动态载入的 脚本、样式、图片 等地址不正确的问题。\n */\nif (window.__POWERED_BY_QIANKUN__) {\n  setGlobalData('PREFIX', '/q');\n  // eslint-disable-next-line no-unused-vars\n  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;\n} else {\n  setTimeout(() => {\n    const bg = document.querySelector('#bg') as HTMLElement;\n    bg && bg.style && (bg.style.top = '0');\n  }, 0);\n}\n\nfunction render(props: any) {\n  const { container } = props;\n  ReactDOM.render(<Router />, (container || document).querySelector('#root'));\n}\n\nif (!window.__POWERED_BY_QIANKUN__) {\n  render({});\n}\n\nexport async function bootstrap() {}\n\nexport async function mount(props: any) {\n  render(props);\n}\n\nexport async function unmount(props: any) {\n  const { container } = props;\n  ReactDOM.unmountComponentAtNode((container || document).querySelector('#root'));\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}